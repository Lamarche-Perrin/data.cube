<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title></title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.11 and GitBook 2.6.7" />

  <meta property="og:title" content="" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html">
<link rel="next" href="unidimensional-exploration.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i>Installation</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#authors-and-license"><i class="fa fa-check"></i>Authors and License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a><ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#downloading-the-dataset"><i class="fa fa-check"></i><b>1.1</b> Downloading the dataset</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#loading-the-library"><i class="fa fa-check"></i><b>1.2</b> Loading the library</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#building-the-cube-with-as.data.cube"><i class="fa fa-check"></i><b>1.3</b> Building the cube with <code>as.data.cube</code></a></li>
<li class="chapter" data-level="1.4" data-path="getting-started.html"><a href="getting-started.html#whats-in-the-cube-with-summary"><i class="fa fa-check"></i><b>1.4</b> What’s in the cube with <code>summary</code></a></li>
<li class="chapter" data-level="1.5" data-path="getting-started.html"><a href="getting-started.html#back-to-frame-with-as.data.frame"><i class="fa fa-check"></i><b>1.5</b> Back to frame with <code>as.data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="unidimensional-exploration.html"><a href="unidimensional-exploration.html"><i class="fa fa-check"></i><b>2</b> Unidimensional Exploration</a><ul>
<li class="chapter" data-level="2.1" data-path="unidimensional-exploration.html"><a href="unidimensional-exploration.html#selecting-one-dimension-with-select.dim"><i class="fa fa-check"></i><b>2.1</b> Selecting one dimension with <code>select.dim</code></a></li>
<li class="chapter" data-level="2.2" data-path="unidimensional-exploration.html"><a href="unidimensional-exploration.html#arranging-elements-with-arrange.elm"><i class="fa fa-check"></i><b>2.2</b> Arranging elements with <code>arrange.elm</code></a></li>
<li class="chapter" data-level="2.3" data-path="unidimensional-exploration.html"><a href="unidimensional-exploration.html#plotting-variables-with-plot.var"><i class="fa fa-check"></i><b>2.3</b> Plotting variables with <code>plot.var</code></a></li>
<li class="chapter" data-level="2.4" data-path="unidimensional-exploration.html"><a href="unidimensional-exploration.html#filtering-elements-with-filter.elm-and-top_n.elm"><i class="fa fa-check"></i><b>2.4</b> Filtering elements with <code>filter.elm</code> and <code>top_n.elm</code></a></li>
<li class="chapter" data-level="2.5" data-path="unidimensional-exploration.html"><a href="unidimensional-exploration.html#other-examples-of-use"><i class="fa fa-check"></i><b>2.5</b> Other examples of use</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="multidimensional-exploration.html"><a href="multidimensional-exploration.html"><i class="fa fa-check"></i><b>3</b> Multidimensional Exploration</a><ul>
<li class="chapter" data-level="3.1" data-path="multidimensional-exploration.html"><a href="multidimensional-exploration.html#selecting-two-dimensions-with-select.dim"><i class="fa fa-check"></i><b>3.1</b> Selecting two dimensions with <code>select.dim</code></a></li>
<li class="chapter" data-level="3.2" data-path="multidimensional-exploration.html"><a href="multidimensional-exploration.html#plotting-bidimensional-variables-with-argument-sep.dim.names-of-plot.var"><i class="fa fa-check"></i><b>3.2</b> Plotting bidimensional variables with argument <code>sep.dim.names</code> of <code>plot.var</code></a></li>
<li class="chapter" data-level="3.3" data-path="multidimensional-exploration.html"><a href="multidimensional-exploration.html#plotting-multidimensional-variables"><i class="fa fa-check"></i><b>3.3</b> Plotting multidimensional variables</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="outlier-analysis.html"><a href="outlier-analysis.html"><i class="fa fa-check"></i><b>4</b> Outlier Analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="outlier-analysis.html"><a href="outlier-analysis.html#first-example-bidimensional-outliers"><i class="fa fa-check"></i><b>4.1</b> First example: Bidimensional outliers</a><ul>
<li class="chapter" data-level="4.1.1" data-path="outlier-analysis.html"><a href="outlier-analysis.html#taking-into-account-the-expected-number-of-articles-for-each-country"><i class="fa fa-check"></i><b>4.1.1</b> Taking into account the expected number of articles for each country</a></li>
<li class="chapter" data-level="4.1.2" data-path="outlier-analysis.html"><a href="outlier-analysis.html#also-taking-into-account-the-expected-number-of-articles-for-each-week"><i class="fa fa-check"></i><b>4.1.2</b> Also taking into account the expected number of articles for each week</a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="getting-started" class="section level1">
<h1><span class="header-section-number">1</span> Getting Started</h1>
<p>This tutorial assumes that you are familiar with the most known R packages of the <a href="https://www.tidyverse.org/"><code>tidyverse</code></a>, in particular <code>tibble</code> operations provided by <a href="https://dplyr.tidyverse.org/"><code>dplyr</code></a> and the forward-pipe operator <code>%&gt;%</code> provided by <a href="https://magrittr.tidyverse.org/"><code>magrittr</code></a>.</p>
<div id="downloading-the-dataset" class="section level2">
<h2><span class="header-section-number">1.1</span> Downloading the dataset</h2>
<p>This tutorial presents a use case of the <code>data.cube</code> library on a quite simple dataset (<a href="link">downloadable here</a>) referencing the citations of country names in press articles. This dataset has been extracted from the corpus of articles gathered by the <a href="https://geomedia.hypotheses.org/">ANR GEOMEDIA Project</a>.</p>
<p>First, import the main file of this dataset as a <code>data.frame</code> (actually, as a <code>tibble</code>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span> (readr)
df &lt;-<span class="st"> </span><span class="kw">read_csv</span> (<span class="st">&#39;data/articles.csv&#39;</span>)</code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   id_media = col_character(),
##   week = col_date(format = &quot;&quot;),
##   id_country = col_character(),
##   article_nb = col_double()
## )</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span> (df)</code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   id_media          week       id_country article_nb
##   &lt;chr&gt;             &lt;date&gt;     &lt;chr&gt;           &lt;dbl&gt;
## 1 en_NZL_nzhera_int 2015-06-01 SVK             0.333
## 2 en_NZL_nzhera_int 2015-03-09 VEN            10.5  
## 3 es_VEN_univer_int 2014-05-19 LBY             9    
## 4 en_MYS_starmy_int 2014-10-13 PSE             9    
## 5 en_NZL_nzhera_int 2014-06-09 GTM             1.5  
## 6 en_MYS_starmy_int 2015-06-22 ARG             3</code></pre>
<ul>
<li>First column <code>id_media</code> contains standardised identifiers of selected newspapers.</li>
<li>Second column <code>week</code> contains publication dates at the week level (date of the first day of the week at the <code>YYYY-MM-DD</code> format).</li>
<li>Third column <code>id_country</code> contains standardised identifiers of cited countries (<a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3">ISO 3166-1 alpha-3</a>).</li>
<li>Last column <code>article_nb</code> gives the corresponding number of articles, that is the number of articles published by <code>id_media</code> during <code>week</code> and citing <code>id_country</code>.</li>
</ul>
<p>For example, the third line of the dataset above indicates that the Venezuelan newspaper <em>El Universal</em> (<code>es_VEN_univer_int</code>) as published <code>9</code> articles talking about Libya (<code>LBY</code>) during the week starting on the 19th of May, 2014 (<code>2014-05-19</code>). Note that the indicated number of articles is not necessarily an integer value (see for example the first line) as an article simultaneously citing <code>n</code> countries is weighted by <code>1/n</code> and then distributed among <code>n</code> lines.</p>
</div>
<div id="loading-the-library" class="section level2">
<h2><span class="header-section-number">1.2</span> Loading the library</h2>
<p>First, load the library:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span> (data.cube)</code></pre></div>
</div>
<div id="building-the-cube-with-as.data.cube" class="section level2">
<h2><span class="header-section-number">1.3</span> Building the cube with <code>as.data.cube</code></h2>
<p>Function <code>as.data.cube</code> transforms a classical <code>data.frame</code> (or <code>tibble</code>) object into a <code>data.cube</code>, that is the data structure that will then be used by the library. One should specify which columns correspond to the cube’s dimensions (in our case, the first three) and which columns correspond to the observed variables (in our case, the last one). Note that one might also rename these dimensions and variables when transforming the <code>data.frame</code> into a <code>data.cube</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">geomedia &lt;-
<span class="st">    </span>df <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw">as.data.cube</span> (
        <span class="dt">dim.names =</span> <span class="kw">list</span> (<span class="dt">media =</span> id_media, week, <span class="dt">country =</span> id_country),
        <span class="dt">var.names =</span> <span class="kw">list</span> (<span class="dt">articles =</span> article_nb)
    )</code></pre></div>
<pre><code>## Warning in as.data.cube_.data.frame(., str.dim.names, str.var.names):
## Observations are assumed to be unique. Check for potential duplicates in
## the input data.frame if unsure.</code></pre>
</div>
<div id="whats-in-the-cube-with-summary" class="section level2">
<h2><span class="header-section-number">1.4</span> What’s in the cube with <code>summary</code></h2>
<p>Function <code>summary</code> then prints a short summary of the data contained in the resulting structure.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">geomedia <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summary</span> ()</code></pre></div>
<pre><code>## data.cube of 3 dimensions and 1 variable
## 
## -&gt; Dimension media
##  - Element number: 36
##  - Class (type):   character (character)
##  - Element names:  en_NZL_nzhera_int, es_VEN_univer_int, en_MYS_starmy_int, ...
## 
## -&gt; Dimension week
##  - Element number: 79
##  - Class (type):   Date (double)
##  - Element names:  2015-06-01, 2015-03-09, 2014-05-19, 2014-10-13, 2014-06-09, ...
## 
## -&gt; Dimension country
##  - Element number: 205
##  - Class (type):   character (character)
##  - Element names:  SVK, VEN, LBY, PSE, GTM, ARG, ARM, AFG, NRU, MEX, IRN, ...
## 
## -&gt; Variable articles
##  - Dimensions:   media x week x country
##  - Class (type): numeric (double)
##  - NA value:     num 0</code></pre>
</div>
<div id="back-to-frame-with-as.data.frame" class="section level2">
<h2><span class="header-section-number">1.5</span> Back to frame with <code>as.data.frame</code></h2>
<p>Function <code>as.data.frame</code> transforms a <code>data.cube</code> object back into a <code>data.frame</code> object (actually, a <code>tibble</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">geomedia <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">as.data.frame</span> ()</code></pre></div>
<pre><code>## # A tibble: 95,674 x 4
##    media             week       country articles
##    &lt;chr&gt;             &lt;date&gt;     &lt;chr&gt;      &lt;dbl&gt;
##  1 en_NZL_nzhera_int 2015-06-01 SVK        0.333
##  2 en_NZL_nzhera_int 2015-03-09 VEN       10.5  
##  3 es_VEN_univer_int 2014-05-19 LBY        9    
##  4 en_MYS_starmy_int 2014-10-13 PSE        9    
##  5 en_NZL_nzhera_int 2014-06-09 GTM        1.5  
##  6 en_MYS_starmy_int 2015-06-22 ARG        3    
##  7 en_USA_wapost_int 2015-01-05 ARM        0.5  
##  8 es_VEN_univer_int 2014-05-26 AFG        4.5  
##  9 en_GBR_dailyt_int 2015-05-04 NRU        1    
## 10 fr_BEL_derheu_int 2014-06-16 MEX        0.333
## # … with 95,664 more rows</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="unidimensional-exploration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
